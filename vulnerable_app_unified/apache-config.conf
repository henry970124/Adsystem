<VirtualHost *:8000>
    ServerName localhost
    
    # 日誌配置
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
    
    # WSGI 配置 - 使用嵌入式模式以 root 運行 (CTF 用途)
    # 不使用 WSGIDaemonProcess 因為它不允許 root
    WSGIScriptAlias / /app/wsgi.py
    WSGIApplicationGroup %{GLOBAL}
    
    # 應用目錄權限
    <Directory /app>
        Require all granted
    </Directory>
    
    # 靜態檔案 (如果需要)
    Alias /static /app/static
    <Directory /app/static>
        Require all granted
    </Directory>
    
    # 上傳檔案目錄
    Alias /uploads /app/uploads
    <Directory /app/uploads>
        Require all granted
    </Directory>
    
    # 允許 .htaccess 覆蓋 (保持漏洞場景)
    <Directory /app>
        AllowOverride All
    </Directory>
</VirtualHost>

# 監聽端口
Listen 8000
